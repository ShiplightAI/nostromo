name: Discord community link visible in status bar
tags: [discord, statusbar]

goal: Verify the Discord community link appears in the VS Code status bar
url: http://localhost:9888/oss-dev/worktrees

statements:
  - description: Wait for shell page to load
    action_entity:
      action_data:
        action_name: wait
        kwargs:
          seconds: 3

  - description: Click on a worktree to open workbench
    action_entity:
      action_data:
        action_name: click
        kwargs:
          element_index: 1
      locator: "locator('div').filter({ hasText: 'main' }).nth(4)"
      xpath: html/body/div[1]/div[2]/div[1]/div[2]/div[1]

  - description: Wait for workbench to load
    action_entity:
      action_data:
        action_name: wait
        kwargs:
          seconds: 8

  - "VERIFY: A Discord community link or icon is visible in the bottom status bar with aria-label containing 'Discord'"
